{"ast":null,"code":"// Simple rolling average (e.g. 7-day for cases)\nexport function rollingAverage(values, windowSize = 7) {\n  if (!values) return [];\n  const result = [];\n  let sum = 0;\n  for (let i = 0; i < values.length; ++i) {\n    var _values$i;\n    const v = (_values$i = values[i]) !== null && _values$i !== void 0 ? _values$i : 0;\n    sum += v;\n    if (i >= windowSize) {\n      var _values;\n      const old = (_values = values[i - windowSize]) !== null && _values !== void 0 ? _values : 0;\n      sum -= old;\n    }\n    if (i >= windowSize - 1) {\n      result.push(sum / windowSize);\n    } else {\n      result.push(null); // not enough data yet\n    }\n  }\n  return result;\n}\n\n// Short-term trend (up / down / flat)\nexport function computeTrend(series, window = 7) {\n  if (!series || series.length < 2) return null;\n  const n = series.length;\n  const start = Math.max(0, n - window);\n  let first = null;\n  let last = null;\n  for (let i = start; i < n; ++i) {\n    const v = series[i];\n    if (v == null || Number.isNaN(v)) continue;\n    if (first === null) first = v;\n    last = v;\n  }\n  if (first === null || last === null) return null;\n  const change = last - first;\n  const pct = first !== 0 ? change / Math.abs(first) * 100 : null;\n  let direction;\n  if (Math.abs(change) < 1e-6 || pct != null && Math.abs(pct) < 2) {\n    direction = \"flat\";\n  } else if (change > 0) {\n    direction = \"up\";\n  } else {\n    direction = \"down\";\n  }\n  return {\n    direction,\n    change,\n    pct\n  };\n}","map":{"version":3,"names":["rollingAverage","values","windowSize","result","sum","i","length","_values$i","v","_values","old","push","computeTrend","series","window","n","start","Math","max","first","last","Number","isNaN","change","pct","abs","direction"],"sources":["/Users/trakoolthai/Desktop/front-end-final-project/src/utils/dataTransforms.js"],"sourcesContent":["// Simple rolling average (e.g. 7-day for cases)\nexport function rollingAverage(values, windowSize = 7) {\n    if (!values) return [];\n    const result = [];\n    let sum = 0;\n\n    for (let i = 0; i < values.length; ++i) {\n        const v = values[i] ?? 0;\n        sum += v;\n\n        if (i >= windowSize) {\n            const old = values[i - windowSize] ?? 0;\n            sum -= old;\n        }\n\n        if (i >= windowSize - 1) {\n            result.push(sum / windowSize);\n        } else {\n            result.push(null); // not enough data yet\n        }\n    }\n\n    return result;\n}\n\n// Short-term trend (up / down / flat)\nexport function computeTrend(series, window = 7) {\n    if (!series || series.length < 2) return null;\n    const n = series.length;\n    const start = Math.max(0, n - window);\n\n    let first = null;\n    let last = null;\n\n    for (let i = start; i < n; ++i) {\n        const v = series[i];\n        if (v == null || Number.isNaN(v)) continue;\n        if (first === null) first = v;\n        last = v;\n    }\n\n    if (first === null || last === null) return null;\n\n    const change = last - first;\n    const pct = first !== 0 ? (change / Math.abs(first)) * 100 : null;\n\n    let direction;\n    if (Math.abs(change) < 1e-6 || (pct != null && Math.abs(pct) < 2)) {\n        direction = \"flat\";\n    } else if (change > 0) {\n        direction = \"up\";\n    } else {\n        direction = \"down\";\n    }\n\n    return { direction, change, pct };\n}\n"],"mappings":"AAAA;AACA,OAAO,SAASA,cAAcA,CAACC,MAAM,EAAEC,UAAU,GAAG,CAAC,EAAE;EACnD,IAAI,CAACD,MAAM,EAAE,OAAO,EAAE;EACtB,MAAME,MAAM,GAAG,EAAE;EACjB,IAAIC,GAAG,GAAG,CAAC;EAEX,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,CAACK,MAAM,EAAE,EAAED,CAAC,EAAE;IAAA,IAAAE,SAAA;IACpC,MAAMC,CAAC,IAAAD,SAAA,GAAGN,MAAM,CAACI,CAAC,CAAC,cAAAE,SAAA,cAAAA,SAAA,GAAI,CAAC;IACxBH,GAAG,IAAII,CAAC;IAER,IAAIH,CAAC,IAAIH,UAAU,EAAE;MAAA,IAAAO,OAAA;MACjB,MAAMC,GAAG,IAAAD,OAAA,GAAGR,MAAM,CAACI,CAAC,GAAGH,UAAU,CAAC,cAAAO,OAAA,cAAAA,OAAA,GAAI,CAAC;MACvCL,GAAG,IAAIM,GAAG;IACd;IAEA,IAAIL,CAAC,IAAIH,UAAU,GAAG,CAAC,EAAE;MACrBC,MAAM,CAACQ,IAAI,CAACP,GAAG,GAAGF,UAAU,CAAC;IACjC,CAAC,MAAM;MACHC,MAAM,CAACQ,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB;EACJ;EAEA,OAAOR,MAAM;AACjB;;AAEA;AACA,OAAO,SAASS,YAAYA,CAACC,MAAM,EAAEC,MAAM,GAAG,CAAC,EAAE;EAC7C,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACP,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;EAC7C,MAAMS,CAAC,GAAGF,MAAM,CAACP,MAAM;EACvB,MAAMU,KAAK,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEH,CAAC,GAAGD,MAAM,CAAC;EAErC,IAAIK,KAAK,GAAG,IAAI;EAChB,IAAIC,IAAI,GAAG,IAAI;EAEf,KAAK,IAAIf,CAAC,GAAGW,KAAK,EAAEX,CAAC,GAAGU,CAAC,EAAE,EAAEV,CAAC,EAAE;IAC5B,MAAMG,CAAC,GAAGK,MAAM,CAACR,CAAC,CAAC;IACnB,IAAIG,CAAC,IAAI,IAAI,IAAIa,MAAM,CAACC,KAAK,CAACd,CAAC,CAAC,EAAE;IAClC,IAAIW,KAAK,KAAK,IAAI,EAAEA,KAAK,GAAGX,CAAC;IAC7BY,IAAI,GAAGZ,CAAC;EACZ;EAEA,IAAIW,KAAK,KAAK,IAAI,IAAIC,IAAI,KAAK,IAAI,EAAE,OAAO,IAAI;EAEhD,MAAMG,MAAM,GAAGH,IAAI,GAAGD,KAAK;EAC3B,MAAMK,GAAG,GAAGL,KAAK,KAAK,CAAC,GAAII,MAAM,GAAGN,IAAI,CAACQ,GAAG,CAACN,KAAK,CAAC,GAAI,GAAG,GAAG,IAAI;EAEjE,IAAIO,SAAS;EACb,IAAIT,IAAI,CAACQ,GAAG,CAACF,MAAM,CAAC,GAAG,IAAI,IAAKC,GAAG,IAAI,IAAI,IAAIP,IAAI,CAACQ,GAAG,CAACD,GAAG,CAAC,GAAG,CAAE,EAAE;IAC/DE,SAAS,GAAG,MAAM;EACtB,CAAC,MAAM,IAAIH,MAAM,GAAG,CAAC,EAAE;IACnBG,SAAS,GAAG,IAAI;EACpB,CAAC,MAAM;IACHA,SAAS,GAAG,MAAM;EACtB;EAEA,OAAO;IAAEA,SAAS;IAAEH,MAAM;IAAEC;EAAI,CAAC;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}